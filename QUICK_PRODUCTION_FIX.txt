# ðŸš€ Production Deployment Commands - Copy & Paste

## Step 1: SSH to Server
```bash
ssh imelocker@server2
cd /home/imelocker/data.imelocker.com
```

## Step 2: Pull Latest Code
```bash
git pull origin master
```

## Step 3: Update .env File
```bash
nano .env
```

### Add these lines (or replace existing Firebase config):
CRITICAL: The private key must be on ONE SINGLE LINE with NO line breaks inside the quotes!

```env
FIREBASE_PROJECT_ID=ime-locker-app
FIREBASE_CLIENT_EMAIL=firebase-adminsdk-fbsvc@ime-locker-app.iam.gserviceaccount.com
FIREBASE_PRIVATE_KEY="-----BEGIN PRIVATE KEY-----\nMIIEvAIBADANBgkqhkiG9w0BAQEFAASCBKYwggSiAgEAAoIBAQDWeFx81K3JMF1K/d8sLe8PhUxiXFdAfBeYrfsBu1aHnNG1dJtKVXVb65zSbCnHmO8U+YR2Prjo27rhYMWd4EUiyIYLyLEl5/Z5PfD+JMGvprbnvXnM+RBsUL3M16IdPi178pUSpae3C9BP98B2gOqipK9fk+YhBCdXQ/948daMi7AeT1uTlCKCKUbQvaV3ajn6iapsci1j1XR4OONxz70TQXuko45Kr2IY3TS1vMBW3pTnhkAPo7SGGfvhTcGs8WH69UwhP6aOytDVV01haxtnhbVIYxK3/Wb5AbFmgbx4LbxDlhFBN8Sy6j56FCcA9ddzuSAniZU0gTqiWvZQWPuRAgMBAAECggEAB5G96eXzsDsVv9TP8JY6brjMplgN+Eeo6YmSZ1A+UJD3UckoxenYN4NMSJzqqJG8NmhMBYRXMFi48sVglB7bMcwT9wyBPA5Aw6ys+btAXruqjulACDzuGHSNDlK59QBByLMaEcto7Ovs0TW0RDpujYj0a5IjuByWat0KgjE+2jzvTcRO1FJmYQuDgDp0tc6p6tvuY2xc9lZrBGzjXVGtMYZgaC65e+T68fOAQs2HZN4n/IvnwqHY6n4b0XxWo3VhLqZ7GT9uB1nXkudUJWSI8yp2ICa0b+jSfxP7DHEA0ty1T+Ie67ktok6mkf2YkQpg+vg1vLRb3Qz5wA17VCXJ8QKBgQD2bYouvWcjFAth8rlvXXIJMQ/z3HcD++Z+E2J1BO70kjLfDlr96Fw1EFXSU3cnw+fsuuQfXVD0CPhrpmEr5TtfcEWwXiBNhXmBwljEMe7aEhfi2x82JHnLXAamcbrJutYl8i8PS0vvIOTDT3Te31oZPU9YjpaOtcZKzGYSv3M+XQKBgQDezQlJixw1K7isVsWS7orCfjsKo5lHbt0279xSEZBDVdRKn3SKVsNPrvC6HlaeZWnjwJ9v/mcqs+oUNEQeRP9RrHr0ANKd5yHWBQ8+LRXzOkRlVyXpyikjbVYBuR2UkR9X1GXsLJXocVb0Se0G+1HOqkXXbxokjek4/cZ46aYWxQKBgFJsEOvRLc3txmDcbmlxN9MbNdq6wpPyjQVeNnAtVj83Jwy0IHsMXMriy9GtWQ1T2R6049gZvhnhZjWbUKT95v3k72ouEV/cZOehuU7l5J3Lr3GRGL9jM9lwzkidgXw3oajPeC4FYUB6IAmzacOhsOEAQKm+B110Lv6Vnw5mOoWBAoGAaczyxuVOuzGz7oBMAdVqDWAJ7ZPz1H5+8uobCd9JRUDhkvB7mR38V9jPbqnYXqdX8p6Nj0tnbAcM3x+pd4oXfPFiMdmwhl8wXHDuA1oSwZLTpn7n3jgJq8KDN87mFG3SijqGU2Mb/VMblhNHKFcOoQFxJGBlxL6SX+HFCG07QiQUCgYB5NPO8p7fPi6ID0LP8OLXjNl3oEOZoR0YbpKa00F6ctyAFT5ky8kQJd2p3/PoSnQFTBLKcBx3j2hdujtB5Iz1NjvSjrCl8u4l4ds4Rw+RXNOuK2jtXE4HDScmIQVw8zE2TBkUGwNWW7M5nOWkA0LVr2zG+Oup8+ZAutM8USWJ6rQ==\n-----END PRIVATE KEY-----"
```

IMPORTANT: Copy this EXACTLY as one continuous line. Do NOT add line breaks inside the quotes!

### Remove or comment out this line if it exists:
```env
# FIREBASE_CREDENTIALS=/var/www/yourapp/storage/app/firebase/ime-locker-app-credentials.json
```

**Save:** Press `Ctrl+X`, then `Y`, then `Enter`

## Step 4: Clear All Caches
```bash
php artisan config:clear
php artisan cache:clear
php artisan view:clear
php artisan route:clear
```

## Step 5: Verify Configuration
```bash
php artisan config:show firebase
```

**Expected output:**
```
firebase
  project_id ......... ime-locker-app
  client_email ....... firebase-adminsdk-fbsvc@ime-locker-app.iam.gserviceaccount.com
  private_key ........ -----BEGIN PRIVATE KEY----- (truncated)
```

## Step 6: Test Composer (Should work now!)
```bash
composer dump-autoload
```

âœ… **Success Indicator:** No Firebase errors during composer dump-autoload

## Step 7: Test PDF Generation
Go to your frontend and try downloading a report as PDF.

---

## ðŸŽ¯ Quick Copy-Paste All Commands:

```bash
ssh imelocker@server2
cd /home/imelocker/data.imelocker.com
git pull origin master
nano .env
# [Add Firebase credentials as shown above]
php artisan config:clear && php artisan cache:clear && php artisan view:clear && php artisan route:clear
php artisan config:show firebase
composer dump-autoload
```

---

## âœ… What This Fixes:

1. âœ… **DomPDF**: Now installed and working
2. âœ… **Firebase**: Configured using direct env credentials
3. âœ… **PDF Generation**: Should work perfectly
4. âœ… **Device Commands**: Will work with FCM

---

**Need help?** Check `PRODUCTION_FIREBASE_FIX.md` for detailed troubleshooting.
